{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\hamd.islam\\\\Desktop\\\\CreativeWork\\\\blog\\\\src\\\\component\\\\Blog\\\\Create.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"../../Firebase\";\nimport ImageUpload from \"./ImageUpload\"; // const formValid = ({ formErrors, ...rest }) => {\n//   let valid = true;\n//   // validate form errors being empty\n//   Object.values(formErrors).forEach(val => {\n//     //console.log(\"FormErrors: \" + val.length > 0);\n//     val.length > 0 && (valid = false);\n//   });\n//   // validate the form was filled out\n//   Object.values(rest).forEach(val => {\n//     console.log(\"RestErrors: \" + val === \"\");\n//     val === \"\" && (valid = false);\n//   });\n//   return valid;\n// };\n\nvar Create =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Create, _Component);\n\n  function Create() {\n    var _this;\n\n    _classCallCheck(this, Create);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Create).call(this));\n\n    _this.onChange = function (e) {\n      e.preventDefault();\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      var state = _this.state;\n      var formErrors = state.formErrors;\n      var formValid = state.formValid;\n\n      switch (name) {\n        case \"title\":\n          formErrors.title = value.length < 6 && value.length > 0 ? \"minimum 6 chrachters required\" : \"\";\n          formErrors.title ? _this.setState({\n            formValid: Object.assign({}, formValid, {\n              title: false\n            })\n          }) : _this.setState({\n            formValid: Object.assign({}, formValid, {\n              title: true\n            })\n          });\n          break;\n\n        case \"description\":\n          formErrors.description = value.length < 50 && value.length > 0 ? \"minimum 50 chrachters required\" : \"\";\n          formErrors.description ? _this.setState({\n            formValid: Object.assign({}, formValid, {\n              description: false\n            })\n          }) : _this.setState({\n            formValid: Object.assign({}, formValid, {\n              description: true\n            })\n          });\n          break;\n\n        case \"author\":\n          formErrors.author = value.length < 3 && value.length > 0 ? \"Minimum 3 chrachters required\" : \"\";\n          formErrors.author ? _this.setState({\n            formValid: Object.assign({}, formValid, {\n              author: false\n            })\n          }) : _this.setState({\n            formValid: Object.assign({}, formValid, {\n              author: true\n            })\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      _this.setState(_defineProperty({\n        formErrors: formErrors\n      }, name, value)); //console.log(typeof state);\n      //console.log(e.target.name);\n      //state[name] = value;\n      //console.log(state);\n      //this.setState({ state });\n      //this.canSubmit();\n\n    };\n\n    _this.getFromChildURL = function (imageURL) {\n      var formValid = _this.state.formValid;\n\n      _this.setState({\n        imageURL: imageURL,\n        formValid: Object.assign({}, formValid, {\n          imageURL: true\n        })\n      }); //this.canSubmit();\n\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault(); //console.log(Object.values(this.state.formValid));\n      //console.log(Object.values(this.state.formValid).every(x => x === true));\n\n      if (Object.values(_this.state.formValid).every(function (x) {\n        return x === true;\n      })) {\n        var _this$state = _this.state,\n            title = _this$state.title,\n            description = _this$state.description,\n            author = _this$state.author,\n            imageURL = _this$state.imageURL;\n\n        _this.ref.add({\n          title: title,\n          description: description,\n          author: author,\n          imageURL: imageURL\n        }).then(function (docRef) {\n          _this.setState({\n            title: \"\",\n            description: \"\",\n            author: \"\",\n            imageURL: \"\"\n          });\n\n          _this.props.history.push(\"/Blog\");\n        }).catch(function (error) {\n          console.error(\"Error adding document: \", error);\n        });\n      } else {}\n    };\n\n    _this.ref = firebase.firestore().collection(\"blog\");\n    _this.state = {\n      title: \"\",\n      titleError: \"\",\n      description: \"\",\n      author: \"\",\n      imageURL: \"\",\n      formErrors: {\n        title: \"\",\n        description: \"\",\n        author: \"\"\n      },\n      formValid: {\n        title: false,\n        description: false,\n        author: false,\n        imageURL: false\n      }\n    }; //isSubmitDisabled: true\n\n    return _this;\n  }\n\n  _createClass(Create, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          title = _this$state2.title,\n          description = _this$state2.description,\n          author = _this$state2.author;\n      return React.createElement(\"div\", {\n        className: \"container \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        class: \"className s12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Title:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control validate\",\n        name: \"title\",\n        value: title,\n        onChange: this.onChange,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"helper-text\",\n        \"data-error\": this.state.formErrors.title,\n        \"data-success\": \"right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Helper text\")))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Description:\"), React.createElement(\"textarea\", {\n        className: \"materialize-textarea\",\n        name: \"description\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, description), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, this.state.formErrors.description))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Author:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"author\",\n        value: author,\n        onChange: this.onChange,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, this.state.formErrors.author))), React.createElement(ImageUpload, {\n        getFromChildURL: this.getFromChildURL,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn-large btn-success\",\n        disabled: !Object.values(this.state.formValid).every(function (x) {\n          return x === true;\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return Create;\n}(Component);\n\nexport default Create;","map":{"version":3,"sources":["C:\\Users\\hamd.islam\\Desktop\\CreativeWork\\blog\\src\\component\\Blog\\Create.js"],"names":["React","Component","firebase","ImageUpload","Create","onChange","e","preventDefault","target","name","value","state","formErrors","formValid","title","length","setState","Object","assign","description","author","getFromChildURL","imageURL","onSubmit","values","every","x","ref","add","then","docRef","props","history","push","catch","error","console","firestore","collection","titleError"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport firebase from \"../../Firebase\";\r\n\r\nimport ImageUpload from \"./ImageUpload\";\r\n\r\n// const formValid = ({ formErrors, ...rest }) => {\r\n//   let valid = true;\r\n\r\n//   // validate form errors being empty\r\n//   Object.values(formErrors).forEach(val => {\r\n//     //console.log(\"FormErrors: \" + val.length > 0);\r\n//     val.length > 0 && (valid = false);\r\n//   });\r\n\r\n//   // validate the form was filled out\r\n//   Object.values(rest).forEach(val => {\r\n//     console.log(\"RestErrors: \" + val === \"\");\r\n//     val === \"\" && (valid = false);\r\n//   });\r\n\r\n//   return valid;\r\n// };\r\n\r\nclass Create extends Component {\r\n  constructor() {\r\n    super();\r\n    this.ref = firebase.firestore().collection(\"blog\");\r\n    this.state = {\r\n      title: \"\",\r\n      titleError: \"\",\r\n      description: \"\",\r\n      author: \"\",\r\n      imageURL: \"\",\r\n      formErrors: { title: \"\", description: \"\", author: \"\" },\r\n      formValid: {\r\n        title: false,\r\n        description: false,\r\n        author: false,\r\n        imageURL: false\r\n      }\r\n    };\r\n    //isSubmitDisabled: true\r\n  }\r\n\r\n  onChange = e => {\r\n    e.preventDefault();\r\n    const { name, value } = e.target;\r\n    let state = this.state;\r\n    let formErrors = state.formErrors;\r\n    let formValid = state.formValid;\r\n    switch (name) {\r\n      case \"title\":\r\n        formErrors.title =\r\n          value.length < 6 && value.length > 0\r\n            ? \"minimum 6 chrachters required\"\r\n            : \"\";\r\n        formErrors.title\r\n          ? this.setState({\r\n              formValid: Object.assign({}, formValid, {\r\n                title: false\r\n              })\r\n            })\r\n          : this.setState({\r\n              formValid: Object.assign({}, formValid, {\r\n                title: true\r\n              })\r\n            });\r\n        break;\r\n      case \"description\":\r\n        formErrors.description =\r\n          value.length < 50 && value.length > 0\r\n            ? \"minimum 50 chrachters required\"\r\n            : \"\";\r\n        formErrors.description\r\n          ? this.setState({\r\n              formValid: Object.assign({}, formValid, {\r\n                description: false\r\n              })\r\n            })\r\n          : this.setState({\r\n              formValid: Object.assign({}, formValid, {\r\n                description: true\r\n              })\r\n            });\r\n        break;\r\n      case \"author\":\r\n        formErrors.author =\r\n          value.length < 3 && value.length > 0\r\n            ? \"Minimum 3 chrachters required\"\r\n            : \"\";\r\n        formErrors.author\r\n          ? this.setState({\r\n              formValid: Object.assign({}, formValid, {\r\n                author: false\r\n              })\r\n            })\r\n          : this.setState({\r\n              formValid: Object.assign({}, formValid, {\r\n                author: true\r\n              })\r\n            });\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.setState({ formErrors, [name]: value });\r\n\r\n    //console.log(typeof state);\r\n    //console.log(e.target.name);\r\n    //state[name] = value;\r\n    //console.log(state);\r\n    //this.setState({ state });\r\n    //this.canSubmit();\r\n  };\r\n  getFromChildURL = imageURL => {\r\n    let formValid = this.state.formValid;\r\n    this.setState({\r\n      imageURL,\r\n      formValid: Object.assign({}, formValid, {\r\n        imageURL: true\r\n      })\r\n    });\r\n    //this.canSubmit();\r\n  };\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    //console.log(Object.values(this.state.formValid));\r\n    //console.log(Object.values(this.state.formValid).every(x => x === true));\r\n\r\n    if (Object.values(this.state.formValid).every(x => x === true)) {\r\n      const { title, description, author, imageURL } = this.state;\r\n      this.ref\r\n        .add({ title, description, author, imageURL })\r\n        .then(docRef => {\r\n          this.setState({\r\n            title: \"\",\r\n            description: \"\",\r\n            author: \"\",\r\n            imageURL: \"\"\r\n          });\r\n          this.props.history.push(\"/Blog\");\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n    } else {\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, description, author } = this.state;\r\n    return (\r\n      <div className=\"container \">\r\n        <div className=\"row \">\r\n          <form onSubmit={this.onSubmit} class=\"className s12\">\r\n            <div className=\"row\">\r\n              <div className=\"input-field\">\r\n                <label htmlFor=\"title\">Title:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control validate\"\r\n                  name=\"title\"\r\n                  value={title}\r\n                  onChange={this.onChange}\r\n                  autoComplete=\"off\"\r\n                />\r\n                <div>\r\n                  <span\r\n                    className=\"helper-text\"\r\n                    data-error={this.state.formErrors.title}\r\n                    data-success=\"right\"\r\n                  >\r\n                    Helper text\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"input-field\">\r\n                <label htmlFor=\"description\">Description:</label>\r\n                <textarea\r\n                  className=\"materialize-textarea\"\r\n                  name=\"description\"\r\n                  onChange={this.onChange}\r\n                >\r\n                  {description}\r\n                </textarea>\r\n                <div>{this.state.formErrors.description}</div>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"input-field\">\r\n                <label htmlFor=\"author\">Author:</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  name=\"author\"\r\n                  value={author}\r\n                  onChange={this.onChange}\r\n                  autoComplete=\"off\"\r\n                />\r\n                <div>{this.state.formErrors.author}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <ImageUpload getFromChildURL={this.getFromChildURL} />\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn-large btn-success\"\r\n              disabled={\r\n                !Object.values(this.state.formValid).every(x => x === true)\r\n              }\r\n            >\r\n              Submit\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Create;\r\n"]},"metadata":{},"sourceType":"module"}